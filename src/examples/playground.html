<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>RespVis - Playground</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8" />
    <style>
      #chart {
        width: 100%;
        height: 50vh;
        min-height: 25rem;
      }

      body {
        background-color: floralwhite;
      }
    </style>
  </head>
  <body>
    <h1>Bar Chart in Custom Grid</h1>
    <div id="chart"></div>
    <script src="../respvis.js"></script>
    <script src="./components/axis.js"></script>
    <script>
      function generateLegend(categories, colors) {
        function generateSwatch(color, text) {
          return respVis.group().config({
            attributes: {
              'grid-template': 'auto / 5 auto 5 auto 5',
            },
            children: [
              respVis.rect().config({
                attributes: {
                  'grid-area': '1 / 2 / 2 / 3',
                  'place-self': 'center end',
                  fill: color,
                },
                size: { width: 15, height: 15 },
              }),
              respVis.text().config({
                attributes: {
                  'grid-area': '1 / 4 / 2 / 5',
                  'place-self': 'center start',
                },
                text: text,
              }),
            ],
          });
        }

        return respVis.group().config({
          attributes: {
            'grid-template': `auto / ${categories.map(() => 'auto').join(' ')}`,
          },
          children: categories.map((category, i) =>
            generateSwatch(colors[i], category).config({
              attributes: { 'grid-area': `1 / ${i + 1} / 2 / ${i + 2}` },
            })
          ),
        });
      }

      const categories = ['Category 1', 'Category 2', 'Category 3'];
      const colors = ['#78b4c6', '#1c9820', '#ff0087'];

      respVis.chart().root(generateLegend(categories, colors)).mount('#chart');
    </script>
  </body>
</html>
