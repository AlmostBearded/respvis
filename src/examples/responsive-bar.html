<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>RespVis - Responsive Bar Chart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="../respvis.css" />
    <style>
      #chart {
        width: 100%;
        height: 50vh;
        min-height: 25rem;
      }

      body {
        background-color: floralwhite;
      }
    </style>
  </head>
  <body>
    <h1>Responsive Bar Chart</h1>
    <div id="chart"></div>
    <code></code>
    <script src="../respvis.js"></script>
    <script>
      var categories = ['Vienna', 'Graz', 'Linz', 'Salzburg', 'Innsbruck', 'Klagenfurt', 'Villach'];
      var values = [1691000, 222000, 205000, 153000, 132000, 91000, 59000];
      
      var mediumMediaQuery = window.matchMedia('screen and (min-width: 40rem)');

      var bars = respVis.bars().categories(categories).values(values);

      var categoriesAxis = respVis
        .axis()
        .scale(bars.categoriesScale())
        .position(respVis.AxisPosition.Bottom)
        .title('Cities');

      var valuesAxis = respVis
        .axis()
        .scale(bars.valuesScale())
        .position(respVis.AxisPosition.Left)
        .title('Population');

      var customGrid = respVis.customGrid().rows('1fr auto').columns('auto 1fr').child(1, 2, bars);

      var chart = respVis
        .chart()
        .layout(customGrid)
        .onTransition(function () {
          setResponsiveFeatures();
          categoriesAxis.render(0);
          valuesAxis.render(0);
        });

      setResponsiveFeatures();

      chart.mount('#chart');

      function setResponsiveFeatures() {
        var barOrientation = mediumMediaQuery.matches
          ? respVis.BarOrientation.Vertical
          : respVis.BarOrientation.Horizontal;

        var categoryPadding = mediumMediaQuery.matches ? 0.15 : 0.05;
        var leftAxis = mediumMediaQuery.matches ? valuesAxis : categoriesAxis;
        var bottomAxis = mediumMediaQuery.matches ? categoriesAxis : valuesAxis;

        bars.categoryPadding(categoryPadding).orientation(barOrientation);
        leftAxis.position(respVis.AxisPosition.Left);
        bottomAxis.position(respVis.AxisPosition.Bottom);
        customGrid.child(1, 1, leftAxis).child(2, 2, bottomAxis);
      }
    </script>
  </body>
</html>
